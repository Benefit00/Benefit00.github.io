<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Cyber Incident Response Simulator</title>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #2d3436 0%, #000000 100%);
      color: white;
      min-height: 100vh;
      overflow-x: hidden;
    }
    .container {
      max-width: 900px;
      margin: 0 auto;
      padding: 20px;
    }

    /* Welcome Screen */
    #welcomeScreen {
      text-align: center;
      padding: 50px 20px;
    }
    #welcomeScreen h1 {
      font-size: 3em;
      color: #00ff88;
      margin-bottom: 20px;
      text-shadow: 0 0 20px rgba(0, 255, 136, 0.5);
    }
    #welcomeScreen .subtitle {
      font-size: 1.3em;
      color: #dfe6e9;
      margin-bottom: 30px;
    }
    .scenario-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: 20px;
      margin-top: 40px;
    }
    .scenario-card {
      background: linear-gradient(135deg, #2d3436 0%, #1a1f2e 100%);
      border: 2px solid #00ff88;
      border-radius: 15px;
      padding: 30px;
      cursor: pointer;
      transition: all 0.3s;
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    }
    .scenario-card:hover {
      transform: translateY(-10px);
      box-shadow: 0 10px 30px rgba(0, 255, 136, 0.3);
      border-color: #00ffff;
    }
    .scenario-card .icon {
      font-size: 3em;
      margin-bottom: 15px;
    }
    .scenario-card .title {
      font-size: 1.4em;
      margin-bottom: 10px;
      color: #00ff88;
    }
    .scenario-card .description {
      font-size: 0.95em;
      color: #b2bec3;
      line-height: 1.5;
    }
    .scenario-card .difficulty {
      margin-top: 15px;
      padding: 5px 10px;
      border-radius: 5px;
      font-size: 0.85em;
      display: inline-block;
    }
    .difficulty.easy { background: #00b894; }
    .difficulty.medium { background: #fdcb6e; color: #2d3436; }
    .difficulty.hard { background: #d63031; }

    /* Game Screen */
    #gameScreen {
      display: none;
    }
    .game-header {
      background: rgba(0, 0, 0, 0.5);
      padding: 20px;
      border-radius: 10px;
      margin-bottom: 30px;
      border: 2px solid #00ff88;
    }
    .game-header h2 {
      color: #00ff88;
      margin-bottom: 10px;
      font-size: 2em;
    }
    .score-bar {
      display: flex;
      justify-content: space-between;
      margin-top: 15px;
      font-size: 1.1em;
    }
    .score-item {
      background: rgba(0, 255, 136, 0.2);
      padding: 8px 15px;
      border-radius: 5px;
      border: 1px solid #00ff88;
    }

    .situation-box {
      background: linear-gradient(135deg, #1e272e 0%, #0f1419 100%);
      border-left: 5px solid #ff3366;
      padding: 25px;
      border-radius: 10px;
      margin-bottom: 30px;
      box-shadow: 0 5px 20px rgba(0, 0, 0, 0.5);
    }
    .situation-box h3 {
      color: #ff3366;
      margin-bottom: 15px;
      font-size: 1.5em;
    }
    .situation-box p {
      line-height: 1.8;
      color: #dfe6e9;
      font-size: 1.1em;
    }

    .choices {
      display: flex;
      flex-direction: column;
      gap: 15px;
    }
    .choice-btn {
      background: linear-gradient(135deg, #2d3436 0%, #1a1f2e 100%);
      border: 2px solid #00ff88;
      color: white;
      padding: 20px 25px;
      border-radius: 10px;
      font-size: 1.05em;
      cursor: pointer;
      transition: all 0.3s;
      text-align: left;
      display: flex;
      align-items: center;
      gap: 15px;
    }
    .choice-btn:hover {
      background: linear-gradient(135deg, #00ff88 0%, #00cc6a 100%);
      color: #000;
      transform: translateX(10px);
      box-shadow: 0 5px 20px rgba(0, 255, 136, 0.4);
    }
    .choice-btn .number {
      background: #00ff88;
      color: #000;
      width: 35px;
      height: 35px;
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: bold;
      font-size: 1.2em;
      flex-shrink: 0;
    }

    .feedback {
      margin-top: 30px;
      padding: 25px;
      border-radius: 10px;
      animation: slideIn 0.5s ease-out;
      border-left: 5px solid;
    }
    @keyframes slideIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }
    .feedback.correct {
      background: rgba(0, 184, 148, 0.2);
      border-color: #00b894;
    }
    .feedback.partial {
      background: rgba(253, 203, 110, 0.2);
      border-color: #fdcb6e;
    }
    .feedback.incorrect {
      background: rgba(214, 48, 49, 0.2);
      border-color: #d63031;
    }
    .feedback h4 {
      font-size: 1.4em;
      margin-bottom: 10px;
    }
    .feedback.correct h4 { color: #00b894; }
    .feedback.partial h4 { color: #fdcb6e; }
    .feedback.incorrect h4 { color: #d63031; }
    .feedback p {
      line-height: 1.6;
      color: #dfe6e9;
    }

    .next-btn {
      background: linear-gradient(135deg, #00ff88 0%, #00cc6a 100%);
      border: none;
      color: #000;
      padding: 15px 40px;
      border-radius: 25px;
      font-size: 1.1em;
      font-weight: bold;
      cursor: pointer;
      margin-top: 20px;
      transition: all 0.3s;
      box-shadow: 0 5px 15px rgba(0, 255, 136, 0.3);
    }
    .next-btn:hover {
      transform: scale(1.05);
      box-shadow: 0 7px 20px rgba(0, 255, 136, 0.5);
    }

    /* Results Screen */
    #resultsScreen {
      display: none;
      text-align: center;
      padding: 50px 20px;
    }
    .results-box {
      background: linear-gradient(135deg, #1e272e 0%, #0f1419 100%);
      border: 3px solid #00ff88;
      border-radius: 20px;
      padding: 50px;
      box-shadow: 0 10px 40px rgba(0, 0, 0, 0.5);
    }
    .results-box h2 {
      font-size: 3em;
      color: #00ff88;
      margin-bottom: 20px;
    }
    .final-score {
      font-size: 4em;
      color: #00ffff;
      margin: 30px 0;
      text-shadow: 0 0 30px rgba(0, 255, 255, 0.8);
    }
    .rating {
      font-size: 2em;
      margin: 20px 0;
    }
    .rating-text {
      font-size: 1.5em;
      color: #dfe6e9;
      margin: 20px 0;
    }
    .stats {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 20px;
      margin: 40px 0;
    }
    .stat-item {
      background: rgba(0, 255, 136, 0.1);
      padding: 20px;
      border-radius: 10px;
      border: 2px solid #00ff88;
    }
    .stat-item .label {
      font-size: 0.9em;
      color: #b2bec3;
      margin-bottom: 10px;
    }
    .stat-item .value {
      font-size: 2em;
      color: #00ff88;
      font-weight: bold;
    }
    .back-btn {
      background: linear-gradient(135deg, #636e72 0%, #2d3436 100%);
      border: 2px solid #b2bec3;
      color: white;
      padding: 15px 40px;
      border-radius: 25px;
      font-size: 1.1em;
      cursor: pointer;
      margin-top: 20px;
      transition: all 0.3s;
      margin-left: 10px;
    }
    .back-btn:hover {
      background: linear-gradient(135deg, #b2bec3 0%, #636e72 100%);
    }

    .hidden { display: none; }

    @media (max-width: 768px) {
      #welcomeScreen h1 { font-size: 2em; }
      .scenario-grid { grid-template-columns: 1fr; }
      .game-header h2 { font-size: 1.5em; }
      .choice-btn { padding: 15px 20px; font-size: 0.95em; }
    }
  </style>
</head>
<body>
  <div class="container">
    <!-- Welcome Screen -->
    <div id="welcomeScreen">
      <h1>üéØ Cyber Incident Response Simulator</h1>
      <p class="subtitle">Test your cybersecurity decision-making skills in realistic scenarios</p>

      <div class="scenario-grid">
        <div class="scenario-card" onclick="startScenario('ransomware')">
          <div class="icon">üîê</div>
          <div class="title">Ransomware Attack</div>
          <div class="description">Your company's systems are encrypted. Make critical decisions under pressure.</div>
          <div class="difficulty hard">Hard</div>
        </div>

        <div class="scenario-card" onclick="startScenario('phishing')">
          <div class="icon">üìß</div>
          <div class="title">Phishing Investigation</div>
          <div class="description">An employee clicked a suspicious link. Contain the threat.</div>
          <div class="difficulty medium">Medium</div>
        </div>

        <div class="scenario-card" onclick="startScenario('databreach')">
          <div class="icon">üíæ</div>
          <div class="title">Data Breach Response</div>
          <div class="description">Customer data may be exposed. Handle the crisis properly.</div>
          <div class="difficulty hard">Hard</div>
        </div>

        <div class="scenario-card" onclick="startScenario('insider')">
          <div class="icon">üë§</div>
          <div class="title">Insider Threat</div>
          <div class="description">Suspicious employee activity detected. Investigate carefully.</div>
          <div class="difficulty medium">Medium</div>
        </div>

        <div class="scenario-card" onclick="startScenario('ddos')">
          <div class="icon">üåê</div>
          <div class="title">DDoS Attack</div>
          <div class="description">Your website is under massive attack. Keep services running.</div>
          <div class="difficulty easy">Easy</div>
        </div>

        <div class="scenario-card" onclick="startScenario('social')">
          <div class="icon">üìû</div>
          <div class="title">Social Engineering</div>
          <div class="description">Someone is impersonating your CEO. Verify and respond.</div>
          <div class="difficulty easy">Easy</div>
        </div>
      </div>
    </div>

    <!-- Game Screen -->
    <div id="gameScreen">
      <div class="game-header">
        <h2 id="scenarioTitle"></h2>
        <div class="score-bar">
          <div class="score-item">
            üìä Score: <span id="currentScore">0</span>
          </div>
          <div class="score-item">
            üìù Step: <span id="currentStep">1</span>/<span id="totalSteps">5</span>
          </div>
          <div class="score-item">
            ‚è±Ô∏è Decisions: <span id="decisionsCount">0</span>
          </div>
        </div>
      </div>

      <div class="situation-box">
        <h3>‚ö†Ô∏è Situation</h3>
        <p id="situationText"></p>
      </div>

      <div class="choices" id="choicesContainer"></div>

      <div id="feedbackContainer"></div>
    </div>

    <!-- Results Screen -->
    <div id="resultsScreen">
      <div class="results-box">
        <h2>üéä Scenario Complete!</h2>
        <div class="final-score" id="finalScore">0</div>
        <div class="rating" id="rating"></div>
        <div class="rating-text" id="ratingText"></div>

        <div class="stats">
          <div class="stat-item">
            <div class="label">Total Score</div>
            <div class="value" id="statScore">0</div>
          </div>
          <div class="stat-item">
            <div class="label">Decisions Made</div>
            <div class="value" id="statDecisions">0</div>
          </div>
          <div class="stat-item">
            <div class="label">Success Rate</div>
            <div class="value" id="statSuccess">0%</div>
          </div>
        </div>

        <button class="next-btn" onclick="resetGame()">üéÆ Try Another Scenario</button>
        <button class="back-btn" onclick="location.href='index.html'">‚¨ÖÔ∏è Back to Games</button>
      </div>
    </div>
  </div>

  <script>
    // Game State
    let currentScenario = null;
    let currentStep = 0;
    let score = 0;
    let maxScore = 0;
    let decisions = 0;
    let correctDecisions = 0;

    // Scenario Database
    const scenarios = {
      ransomware: {
        title: "üîê Ransomware Attack",
        icon: "üîê",
        steps: [
          {
            situation: "At 3:00 AM, your monitoring system alerts you that multiple servers are showing unusual disk activity. Within minutes, workstations start displaying ransom notes demanding 50 Bitcoin ($2M USD). The message says you have 48 hours to pay or all data will be permanently deleted. What's your FIRST action?",
            choices: [
              { text: "Immediately pay the ransom to get our systems back quickly", points: 0, feedback: "‚ùå Incorrect - Paying ransomware encourages attackers and doesn't guarantee data recovery. Many organizations pay and never receive decryption keys.", type: "incorrect" },
              { text: "Isolate infected systems from the network to prevent spread", points: 25, feedback: "‚úÖ Excellent! Containment is the first priority. Disconnecting infected systems prevents the ransomware from spreading to other machines and systems.", type: "correct" },
              { text: "Restart all affected servers to clear the ransomware", points: 5, feedback: "‚ö†Ô∏è Dangerous - Restarting may allow the ransomware to complete encryption and could destroy forensic evidence needed for investigation.", type: "incorrect" },
              { text: "Send a company-wide email warning everyone about the attack", points: 10, feedback: "‚ö†Ô∏è Partially correct - Communication is important, but containment must come first. Also, email systems might be compromised.", type: "partial" }
            ]
          },
          {
            situation: "You've isolated the infected systems. Your IT team reports that the ransomware entered through a phishing email opened by an employee. You have offline backups from 2 days ago, but they'll need 12 hours to restore. The executive team is pressuring you for a solution. What do you do?",
            choices: [
              { text: "Begin restoring from backups immediately - accept the 2-day data loss", points: 25, feedback: "‚úÖ Correct! Using clean backups is the most reliable recovery method. 2 days of data is better than paying criminals with no guarantee.", type: "correct" },
              { text: "Negotiate with the attackers for more time while restoring backups", points: 15, feedback: "‚ö†Ô∏è Risky - Engaging with attackers can provide intelligence but might encourage future attacks. Focus on recovery instead.", type: "partial" },
              { text: "Pay the ransom since executives want fast recovery", points: 0, feedback: "‚ùå Wrong - Even with executive pressure, paying sets dangerous precedent and may fund criminal operations. Explain risks and advocate for backup restoration.", type: "incorrect" },
              { text: "Try to decrypt the files yourself using online tools", points: 5, feedback: "‚ö†Ô∏è Ineffective - Most modern ransomware uses strong encryption. While free decryption tools exist for some strains, professional incident response is needed.", type: "incorrect" }
            ]
          },
          {
            situation: "During restoration, you discover the attackers had access to your network for 3 weeks before deploying ransomware. They may have stolen sensitive customer data including names, emails, and payment information for 50,000 customers. What's your responsibility?",
            choices: [
              { text: "Keep quiet - we're not sure data was actually stolen", points: 0, feedback: "‚ùå Illegal - Most jurisdictions require breach notification. Hiding breaches can result in massive fines and destroy customer trust.", type: "incorrect" },
              { text: "Notify affected customers and relevant authorities per GDPR/data protection laws", points: 30, feedback: "‚úÖ Perfect! Legal compliance and transparency are critical. Notify customers within required timeframes (typically 72 hours) and offer credit monitoring.", type: "correct" },
              { text: "Only notify customers if we confirm data theft occurred", points: 10, feedback: "‚ö†Ô∏è Risky - Waiting for confirmation may violate notification deadlines. When in doubt, notify. Better to over-communicate than face legal consequences.", type: "partial" },
              { text: "Hire a PR firm to manage the message first", points: 5, feedback: "‚ö†Ô∏è Partially correct - PR help is useful, but legal notifications must happen first. Don't delay compliance for optics.", type: "partial" }
            ]
          },
          {
            situation: "Systems are restored and customers notified. Now you need to prevent this from happening again. The attack vector was a phishing email, but the attackers exploited multiple security weaknesses. What's your comprehensive prevention strategy?",
            choices: [
              { text: "Implement multi-factor authentication (MFA), employee security training, email filtering, and regular backup testing", points: 30, feedback: "‚úÖ Excellent! A layered security approach (defense in depth) addresses multiple attack vectors. MFA alone could have prevented this.", type: "correct" },
              { text: "Just install better antivirus software", points: 5, feedback: "‚ùå Insufficient - Antivirus is one layer, but attackers bypass it easily. You need multiple defensive layers and user education.", type: "incorrect" },
              { text: "Fire the employee who clicked the phishing link", points: 0, feedback: "‚ùå Wrong approach - Anyone can fall for sophisticated phishing. Focus on systems and training, not blame. That employee likely feels terrible already.", type: "incorrect" },
              { text: "Block all email attachments company-wide", points: 10, feedback: "‚ö†Ô∏è Too extreme - While reducing risk, this hinders business operations. Use email filtering, sandboxing, and user training instead.", type: "partial" }
            ]
          },
          {
            situation: "Three months later, you receive another ransom demand - but this time, the attackers claim to have stolen your company's trade secrets and customer database BEFORE you detected them. They threaten to sell this data to competitors unless you pay $500,000. How do you respond?",
            choices: [
              { text: "Immediately involve law enforcement and your legal team", points: 25, feedback: "‚úÖ Correct! This is extortion and potentially espionage. FBI/law enforcement have experience with these cases. Document everything for legal action.", type: "correct" },
              { text: "Pay the ransom to protect trade secrets", points: 0, feedback: "‚ùå Wrong - Paying doesn't guarantee they'll delete data. They can extort you repeatedly. Report to authorities and prepare for potential data exposure.", type: "incorrect" },
              { text: "Threaten to counter-hack them", points: 0, feedback: "‚ùå Illegal - 'Hacking back' is illegal in most jurisdictions and can make you liable. Always work through legal channels.", type: "incorrect" },
              { text: "Ignore the threat - they're probably bluffing", points: 5, feedback: "‚ùå Dangerous - Threat actors often carry through on threats. Take it seriously, involve law enforcement, and prepare incident response.", type: "incorrect" }
            ]
          }
        ]
      },

      phishing: {
        title: "üìß Phishing Investigation",
        icon: "üìß",
        steps: [
          {
            situation: "An employee in accounting reports clicking a link in an email claiming to be from your CEO requesting an urgent wire transfer. The email looked legitimate with correct logos and signature. The link led to a login page asking for their credentials. They entered their username and password before realizing something was wrong. What's your immediate action?",
            choices: [
              { text: "Immediately reset the employee's password and revoke active sessions", points: 30, feedback: "‚úÖ Perfect! Quick credential reset prevents attackers from using the stolen credentials. Time is critical here.", type: "correct" },
              { text: "Tell the employee to change their password when convenient", points: 5, feedback: "‚ùå Too slow - Attackers may already be using those credentials. Immediate forced reset is required.", type: "incorrect" },
              { text: "Monitor the account for suspicious activity", points: 10, feedback: "‚ö†Ô∏è Insufficient - Monitoring is good, but you must assume credentials are compromised. Reset immediately AND monitor.", type: "partial" },
              { text: "Scold the employee for falling for the phishing attack", points: 0, feedback: "‚ùå Counterproductive - This discourages future reporting. Phishing is sophisticated. Praise them for reporting it quickly!", type: "incorrect" }
            ]
          },
          {
            situation: "You've reset credentials. Upon investigation, you discover the employee has access to the company financial system and customer database. The attackers may have had access for up to 20 minutes before the employee reported it. What's your next step?",
            choices: [
              { text: "Review all account activity logs for those 20 minutes to identify what was accessed", points: 25, feedback: "‚úÖ Excellent! Forensic analysis of logs shows what data was compromised. Check for downloads, transfers, or privilege escalations.", type: "correct" },
              { text: "Assume no damage since it was only 20 minutes", points: 0, feedback: "‚ùå Dangerous assumption - Automated tools can exfiltrate massive amounts of data in seconds. Always investigate.", type: "incorrect" },
              { text: "Shut down the entire financial system immediately", points: 10, feedback: "‚ö†Ô∏è Too extreme - This disrupts business unnecessarily. Review logs first, then take targeted action based on findings.", type: "partial" },
              { text: "Only check if any wire transfers were attempted", points: 15, feedback: "‚ö†Ô∏è Too narrow - Check ALL activity: data access, downloads, lateral movement, privilege changes, not just transfers.", type: "partial" }
            ]
          },
          {
            situation: "Log analysis shows the attacker accessed the customer database and downloaded a file containing 10,000 customer email addresses. No financial transactions occurred. The phishing email came from a spoofed domain (ceroacme.com instead of ceo@acme.com). What technical controls should you implement?",
            choices: [
              { text: "Implement DMARC, SPF, and DKIM email authentication to prevent domain spoofing", points: 30, feedback: "‚úÖ Perfect! These email authentication protocols prevent attackers from spoofing your domain. Also add warning banners for external emails.", type: "correct" },
              { text: "Block all external emails", points: 5, feedback: "‚ùå Impractical - This would cripple business operations. Use authentication and filtering instead.", type: "incorrect" },
              { text: "Just tell employees to be more careful", points: 0, feedback: "‚ùå Insufficient - Technical controls are needed. Human error will always occur; defense must be multi-layered.", type: "incorrect" },
              { text: "Only allow emails from whitelisted domains", points: 10, feedback: "‚ö†Ô∏è Too restrictive - This prevents legitimate business communication. Use authentication standards and training instead.", type: "partial" }
            ]
          },
          {
            situation: "You've implemented technical controls. Now you must address the compromised customer email list. The 10,000 emails were downloaded. What's your obligation and best practice?",
            choices: [
              { text: "Notify affected customers about the potential compromise and advise them to be alert for phishing", points: 25, feedback: "‚úÖ Correct! Transparency and customer warning helps them protect themselves from follow-up attacks using their data.", type: "correct" },
              { text: "Don't notify - it's just emails, not financial data", points: 0, feedback: "‚ùå Wrong - Even email addresses have value and may require notification under data protection laws. It enables future targeted attacks.", type: "incorrect" },
              { text: "Only notify if they ask", points: 0, feedback: "‚ùå Unethical and potentially illegal - Proactive notification is required in many jurisdictions and is the right thing to do.", type: "incorrect" },
              { text: "Send a generic security reminder to all customers", points: 15, feedback: "‚ö†Ô∏è Partially correct - Better than nothing, but affected customers should be specifically informed about the breach.", type: "partial" }
            ]
          },
          {
            situation: "Final step: Preventing future phishing attacks. Your security audit revealed that 40% of employees failed a simulated phishing test last year. What's your comprehensive approach?",
            choices: [
              { text: "Implement regular security awareness training, simulated phishing campaigns, MFA everywhere, and email filtering with link sandboxing", points: 30, feedback: "‚úÖ Perfect! Combining education, testing, technical controls, and MFA creates strong defense. Regular simulation training improves recognition skills.", type: "correct" },
              { text: "Fire employees who fail phishing tests", points: 0, feedback: "‚ùå Terrible approach - This creates fear and discourages reporting. Education and support are more effective than punishment.", type: "incorrect" },
              { text: "Just send out a one-time security memo", points: 5, feedback: "‚ùå Insufficient - One-time training has minimal impact. Security awareness requires ongoing education and reinforcement.", type: "incorrect" },
              { text: "Only implement email filtering technology", points: 15, feedback: "‚ö†Ô∏è Incomplete - Technology alone isn't enough. Humans are the last line of defense. Combine tech with regular training.", type: "partial" }
            ]
          }
        ]
      },

      databreach: {
        title: "üíæ Data Breach Response",
        icon: "üíæ",
        steps: [
          {
            situation: "Your security team detects unusual outbound traffic at 2 AM on a Saturday. Investigation reveals an exposed S3 bucket containing 500,000 customer records (names, emails, phone numbers, and hashed passwords). The bucket has been publicly accessible for 6 months. What's your first priority?",
            choices: [
              { text: "Immediately secure the S3 bucket and cut off public access", points: 30, feedback: "‚úÖ Excellent! Stop the bleeding first. Securing the exposure prevents further unauthorized access while you investigate the scope.", type: "correct" },
              { text: "Start notifying customers immediately", points: 10, feedback: "‚ö†Ô∏è Premature - First contain the breach, then investigate scope before notification. You need accurate information for customers.", type: "partial" },
              { text: "Wait until Monday to brief the executive team", points: 0, feedback: "‚ùå Dangerous delay - Every minute counts. Secure the data immediately and notify executives urgently, even on weekends.", type: "incorrect" },
              { text: "Delete the S3 bucket to hide the evidence", points: 0, feedback: "‚ùå Illegal! This destroys forensic evidence and violates data protection laws. Secure it and preserve evidence for investigation.", type: "incorrect" }
            ]
          },
          {
            situation: "The bucket is secured. Forensic analysis shows the bucket was accessed 847 times from 23 different IP addresses over 6 months. You cannot determine exactly what data was downloaded. Under GDPR and most data protection laws, what's your legal obligation?",
            choices: [
              { text: "Notify supervisory authority within 72 hours and affected individuals without undue delay", points: 30, feedback: "‚úÖ Correct! GDPR requires notification to authorities within 72 hours and to individuals when there's high risk. Most data protection laws have similar requirements.", type: "correct" },
              { text: "Only notify if we can prove data was actually downloaded", points: 0, feedback: "‚ùå Wrong - When data is exposed and access occurred, you must assume compromise. Waiting for proof violates notification timelines.", type: "incorrect" },
              { text: "Notify authorities but not customers to avoid panic", points: 5, feedback: "‚ùå Illegal - Customers must be notified when their data is at high risk. They need to protect themselves from fraud and identity theft.", type: "incorrect" },
              { text: "Wait 30 days to complete a full investigation", points: 0, feedback: "‚ùå Violates legal timelines - Most laws require notification within days, not weeks. Delayed notification can result in massive fines.", type: "incorrect" }
            ]
          },
          {
            situation: "You're preparing customer notifications. The passwords were hashed with bcrypt (strong), but some customers may have reused passwords from other sites. What should you tell customers?",
            choices: [
              { text: "Explain what happened, what data was exposed, recommend they change passwords and enable MFA everywhere, and offer credit monitoring", points: 30, feedback: "‚úÖ Perfect! Transparency, specific guidance, and support services show you take their security seriously. Clear communication builds trust.", type: "correct" },
              { text: "Send a vague 'we take security seriously' message without details", points: 0, feedback: "‚ùå Unacceptable - Customers deserve clear information about what was exposed so they can protect themselves. Vagueness destroys trust.", type: "incorrect" },
              { text: "Only mention the exposure, no recommendations", points: 10, feedback: "‚ö†Ô∏è Incomplete - Customers need guidance on protecting themselves. Provide specific, actionable steps they should take.", type: "partial" },
              { text: "Downplay the risk since passwords were hashed", points: 5, feedback: "‚ùå Misleading - While bcrypt is strong, other data was exposed and sophisticated attackers may crack some hashes. Be honest about risks.", type: "incorrect" }
            ]
          },
          {
            situation: "News media has discovered the breach and published a story. Angry customers are flooding social media. Your stock price dropped 15%. The CEO wants to know who's responsible. How do you handle internal accountability?",
            choices: [
              { text: "Conduct a blameless post-mortem to understand system failures and implement preventive measures", points: 25, feedback: "‚úÖ Excellent! Blameless post-mortems focus on fixing systems, not punishing people. This encourages honesty and continuous improvement.", type: "correct" },
              { text: "Fire the developer who created the S3 bucket", points: 0, feedback: "‚ùå Counterproductive - This creates fear and discourages reporting. Security failures are usually systemic. Fix processes and systems.", type: "incorrect" },
              { text: "Blame a third-party vendor to deflect responsibility", points: 0, feedback: "‚ùå Unethical - If it's your data, it's your responsibility. Shifting blame damages partnerships and doesn't solve the problem.", type: "incorrect" },
              { text: "Publicly identify the responsible employee to satisfy media pressure", points: 0, feedback: "‚ùå Terrible - This destroys employee morale and trust. Handle internal accountability privately and focus externally on solutions.", type: "incorrect" }
            ]
          },
          {
            situation: "Final step: The breach cost $5.2M in notifications, legal fees, fines, and remediation. Insurance covered $2M. The board wants assurance this won't happen again. What comprehensive security improvements do you propose?",
            choices: [
              { text: "Implement automated security scanning, IAM policies, access reviews, security training, and regular penetration testing", points: 30, feedback: "‚úÖ Perfect! This addresses multiple failure points: technology (scanning, IAM), process (reviews), and people (training). Defense in depth.", type: "correct" },
              { text: "Just implement automated S3 bucket scanning", points: 10, feedback: "‚ö†Ô∏è Too narrow - While scanning helps, you need comprehensive controls covering people, process, and technology across all systems.", type: "partial" },
              { text: "Move everything to a different cloud provider", points: 5, feedback: "‚ùå Misguided - The problem was configuration and process, not the provider. Same mistakes can happen anywhere. Fix your practices.", type: "incorrect" },
              { text: "Hire more security staff without process changes", points: 10, feedback: "‚ö†Ô∏è Insufficient - More people won't help without better processes, tools, and training. Focus on systematic improvements.", type: "partial" }
            ]
          }
        ]
      },

      insider: {
        title: "üë§ Insider Threat Detection",
        icon: "üë§",
        steps: [
          {
            situation: "Your Data Loss Prevention (DLP) system alerts that a senior developer downloaded the entire customer database to a USB drive at 11 PM on Friday. This employee has authorized access but has never done this before. They gave notice two weeks ago and are leaving for a competitor. What's your first action?",
            choices: [
              { text: "Immediately disable their access and secure the USB drive, then investigate calmly", points: 30, feedback: "‚úÖ Correct! Prevent further data exfiltration while preserving your ability to investigate. Act decisively but professionally.", type: "correct" },
              { text: "Confront the employee angrily and demand the USB drive", points: 5, feedback: "‚ö†Ô∏è Risky - Emotional confrontation may cause them to destroy evidence or become defensive. Handle professionally with HR and legal present.", type: "partial" },
              { text: "Monitor their activity to gather more evidence", points: 10, feedback: "‚ö†Ô∏è Dangerous - They may exfiltrate more data or destroy evidence. When data theft is detected, immediate action is needed.", type: "partial" },
              { text: "Ignore it - they have authorized access", points: 0, feedback: "‚ùå Wrong - Authorized access doesn't mean authorized use. Downloading entire databases to personal devices violates policy.", type: "incorrect" }
            ]
          },
          {
            situation: "You've disabled access and retrieved the USB drive. The employee claims they were 'backing up their code projects for their portfolio.' HR is present. What's your approach to the investigation?",
            choices: [
              { text: "Forensically image the USB drive, review access logs, and document everything while treating them respectfully", points: 25, feedback: "‚úÖ Excellent! Professional forensics preserves evidence for potential legal action. Documentation is critical. Treat them with dignity.", type: "correct" },
              { text: "Immediately call the police and press charges", points: 10, feedback: "‚ö†Ô∏è Premature - Complete investigation first. You need evidence of intent and damage. Consult legal counsel before involving law enforcement.", type: "partial" },
              { text: "Accept their explanation and return the drive", points: 0, feedback: "‚ùå Naive - Their explanation doesn't match behavior (customer database isn't code). Investigate thoroughly and preserve evidence.", type: "incorrect" },
              { text: "Search their personal belongings without consent", points: 0, feedback: "‚ùå Illegal in most jurisdictions - This violates privacy laws. Work within legal frameworks and involve law enforcement if search is needed.", type: "incorrect" }
            ]
          },
          {
            situation: "Forensic analysis reveals the USB contains the customer database, proprietary source code, and strategic business documents. The employee refuses to cooperate. Legal counsel confirms this is likely trade secret theft. What's your next step?",
            choices: [
              { text: "Involve law enforcement and seek legal injunction to prevent them from using stolen data at new company", points: 30, feedback: "‚úÖ Perfect! Trade secret theft is criminal. Legal action protects your business and sends message that theft has consequences.", type: "correct" },
              { text: "Negotiate a settlement where they promise not to use the data", points: 10, feedback: "‚ö†Ô∏è Weak - Without legal enforcement, promises are meaningless. You need legal protections and accountability for theft.", type: "partial" },
              { text: "Just let them go to avoid bad publicity", points: 0, feedback: "‚ùå Dangerous - This encourages future theft and damages your business. Protect your assets and hold people accountable.", type: "incorrect" },
              { text: "Leak their information online as retaliation", points: 0, feedback: "‚ùå Illegal! This is libel/harassment and makes you liable. Always work through proper legal channels.", type: "incorrect" }
            ]
          },
          {
            situation: "Law enforcement is investigating. Meanwhile, you need to prevent similar incidents. Your audit reveals 47 employees have broad database access they don't need for their jobs. What security principle should you implement?",
            choices: [
              { text: "Principle of Least Privilege - give users minimum access needed for their role", points: 25, feedback: "‚úÖ Excellent! Least privilege dramatically reduces insider threat risk. Combine with regular access reviews and DLP monitoring.", type: "correct" },
              { text: "Block all USB drives and external storage company-wide", points: 15, feedback: "‚ö†Ô∏è Helpful but incomplete - This addresses one vector but not cloud uploads, email, or other exfiltration methods. Need comprehensive approach.", type: "partial" },
              { text: "Monitor all employee communications and computer activity", points: 10, feedback: "‚ö†Ô∏è Privacy concerns - Excessive monitoring has legal and ethical issues. Focus on data access controls and anomaly detection instead.", type: "partial" },
              { text: "Make all employees sign stricter NDAs", points: 5, feedback: "‚ùå Insufficient - Legal agreements don't prevent determined theft. Technical controls (access limits, monitoring) are more effective.", type: "incorrect" }
            ]
          },
          {
            situation: "Final scenario: Three months later, you notice unusual access patterns from an employee in finance who's viewing executive salary data they shouldn't access. However, they have a legitimate business justification: HR asked them to help with compensation analysis. How do you handle this?",
            choices: [
              { text: "Verify the request with HR, grant temporary elevated access with approval trail, then revoke after task completion", points: 30, feedback: "‚úÖ Perfect! This balances security with business needs. Temporary access with approval and auditing is the right approach.", type: "correct" },
              { text: "Deny access - they should use HR's credentials instead", points: 10, feedback: "‚ö†Ô∏è Poor practice - Sharing credentials violates security policy and removes accountability. Temporary individual access is better.", type: "partial" },
              { text: "Give them permanent elevated access since they might need it again", points: 0, feedback: "‚ùå Violates least privilege - Grant minimum access for minimum time needed. Permanent elevated access increases risk unnecessarily.", type: "incorrect" },
              { text: "Ignore it since HR requested it", points: 0, feedback: "‚ùå No verification - Always verify unusual access requests directly with the requesting party. Social engineering attacks use fake authorization.", type: "incorrect" }
            ]
          }
        ]
      },

      ddos: {
        title: "üåê DDoS Attack Mitigation",
        icon: "üåê",
        steps: [
          {
            situation: "Your e-commerce website suddenly becomes unresponsive. Monitoring shows 50,000 requests per second from thousands of different IP addresses worldwide. Legitimate customers can't access your site. This is a Distributed Denial of Service (DDoS) attack during your biggest sales day. What's your immediate response?",
            choices: [
              { text: "Enable your DDoS protection service (Cloudflare/AWS Shield) or contact your ISP for mitigation", points: 30, feedback: "‚úÖ Excellent! DDoS mitigation services filter malicious traffic. If you don't have one, ISP-level filtering is next best option.", type: "correct" },
              { text: "Block all traffic from foreign countries", points: 10, feedback: "‚ö†Ô∏è Too broad - This blocks legitimate international customers and sophisticated attacks use domestic IPs. Use targeted filtering instead.", type: "partial" },
              { text: "Restart the web server to clear connections", points: 0, feedback: "‚ùå Ineffective - The attack will immediately overwhelm it again. You need traffic filtering before requests reach your server.", type: "incorrect" },
              { text: "Do nothing and wait for the attack to stop", points: 0, feedback: "‚ùå Costly - Every minute down loses revenue and damages reputation. Active mitigation is essential for business continuity.", type: "incorrect" }
            ]
          },
          {
            situation: "DDoS protection is active but attack is evolving. Attackers are now targeting your API endpoints with seemingly legitimate requests that are expensive to process (database queries). Simple rate limiting would block legitimate users too. What's your strategy?",
            choices: [
              { text: "Implement CAPTCHA challenges, behavioral analysis, and cache frequently-requested data", points: 25, feedback: "‚úÖ Smart! CAPTCHAs distinguish humans from bots, behavioral analysis detects abnormal patterns, and caching reduces database load.", type: "correct" },
              { text: "Shut down the API completely until attack ends", points: 5, feedback: "‚ùå Too extreme - This accomplishes the attacker's goal (denial of service). Use intelligent filtering to allow legitimate traffic.", type: "incorrect" },
              { text: "Only allow logged-in users to access API", points: 15, feedback: "‚ö†Ô∏è Partially effective - This helps but prevents legitimate guest users. Combine with rate limiting and behavioral analysis.", type: "partial" },
              { text: "Add more servers to handle the load", points: 10, feedback: "‚ö†Ô∏è Expensive and ineffective - Scaling can't keep up with DDoS attacks. Attackers can always add more bots. Filter before processing.", type: "partial" }
            ]
          },
          {
            situation: "The attack has been running for 6 hours. Your security team traces it to a botnet of 10,000 compromised IoT devices. Law enforcement says investigation will take weeks. Meanwhile, the attacker emails demanding $100,000 in Bitcoin to stop. How do you respond?",
            choices: [
              { text: "Refuse to pay, maintain DDoS mitigation, and coordinate with law enforcement", points: 30, feedback: "‚úÖ Correct! Paying encourages future attacks. Proper DDoS protection makes attacks economically unviable for attackers.", type: "correct" },
              { text: "Pay the ransom to end it quickly", points: 0, feedback: "‚ùå Wrong - Payment doesn't guarantee they'll stop and encourages repeat attacks. Invest in proper DDoS protection instead.", type: "incorrect" },
              { text: "Launch a counter-attack against the botnet", points: 0, feedback: "‚ùå Illegal - 'Hacking back' is illegal and you'd attack innocent IoT device owners, not the attacker. Use legal channels.", type: "incorrect" },
              { text: "Threaten to report them if they don't stop", points: 5, feedback: "‚ùå Ineffective - Anonymous attackers don't fear threats. Focus on technical mitigation and law enforcement cooperation.", type: "incorrect" }
            ]
          },
          {
            situation: "After 12 hours, the attack stops. You've lost $500K in sales. Post-incident analysis needed. What's the most important preventive measure for future DDoS attacks?",
            choices: [
              { text: "Implement permanent DDoS protection service, create incident response plan, and conduct regular DDoS drills", points: 25, feedback: "‚úÖ Perfect! Prevention is cheaper than mitigation. DDoS protection, planning, and practice ensure fast response to future attacks.", type: "correct" },
              { text: "Sue the attackers for damages", points: 5, feedback: "‚ö†Ô∏è Impractical - DDoS attackers are usually anonymous and in different jurisdictions. Focus on technical prevention instead.", type: "partial" },
              { text: "Buy more bandwidth to absorb future attacks", points: 10, feedback: "‚ö†Ô∏è Expensive and ineffective - Attackers can always overwhelm bandwidth. Filtering and protection services are more cost-effective.", type: "partial" },
              { text: "Switch to a different hosting provider", points: 5, feedback: "‚ùå Doesn't solve problem - Any provider can be attacked. You need DDoS protection regardless of where you're hosted.", type: "incorrect" }
            ]
          },
          {
            situation: "Final question: Six months later, you notice unusual traffic patterns that might indicate reconnaissance for another attack. Your DDoS protection is active. What ongoing security practices should you maintain?",
            choices: [
              { text: "Continuous traffic monitoring, regular security testing, updated response plans, and staff training", points: 25, feedback: "‚úÖ Excellent! Ongoing vigilance and preparedness are key. Regular drills ensure your team responds effectively under pressure.", type: "correct" },
              { text: "Just rely on the DDoS protection service - they'll handle it", points: 10, feedback: "‚ö†Ô∏è Over-reliant - Protection services are essential but you need monitoring, planning, and trained staff for comprehensive defense.", type: "partial" },
              { text: "Monitor only during high-traffic periods like sales events", points: 5, feedback: "‚ùå Insufficient - Attacks can happen anytime. Continuous monitoring detects and mitigates threats faster.", type: "incorrect" },
              { text: "Nothing - the attack won't happen again", points: 0, feedback: "‚ùå Naive - DDoS attacks are common and recurring. Maintaining defenses and readiness is essential for any online business.", type: "incorrect" }
            ]
          }
        ]
      },

      social: {
        title: "üìû Social Engineering Attack",
        icon: "üìû",
        steps: [
          {
            situation: "You're the IT manager. You receive an urgent call from someone claiming to be your CEO who's traveling abroad. They say they're locked out of their email due to MFA and need you to disable it immediately for an urgent client deal. The caller ID shows the CEO's mobile number. What do you do?",
            choices: [
              { text: "Verify through a separate communication channel (call CEO's known number or assistant) before making any changes", points: 30, feedback: "‚úÖ Perfect! Always verify urgent requests through independent channels. Caller ID can be spoofed easily. This is classic social engineering.", type: "correct" },
              { text: "Disable MFA immediately since it's the CEO and caller ID matches", points: 0, feedback: "‚ùå Dangerous! Caller ID spoofing is trivial. Attackers research executives and create urgency to bypass security. Always verify.", type: "incorrect" },
              { text: "Ask security questions like 'what's your employee ID?'", points: 15, feedback: "‚ö†Ô∏è Weak - Attackers often research targets and know personal details. Independent verification through known contact methods is essential.", type: "partial" },
              { text: "Tell them to contact the help desk", points: 10, feedback: "‚ö†Ô∏è Partially correct - This adds a barrier, but help desk might fall for the same trick. You should personally verify through independent channel.", type: "partial" }
            ]
          },
          {
            situation: "You call the CEO's assistant who confirms the CEO is indeed traveling but never contacted IT. You've identified a social engineering attack. The attacker calls back, now claiming to be 'calling from IT security' about a critical system breach. They ask for admin credentials to 'secure the systems.' How do you respond?",
            choices: [
              { text: "Hang up, report to security team, and issue company-wide alert about the social engineering attempt", points: 30, feedback: "‚úÖ Excellent! Warning others prevents them from falling for the same attack. Document the attempt for security awareness training.", type: "correct" },
              { text: "Give them fake credentials to track them", points: 10, feedback: "‚ö†Ô∏è Risky - While tempting, this could backfire legally. Report to proper authorities and security team who have legal framework to investigate.", type: "partial" },
              { text: "Question them to gather information about the attack", points: 15, feedback: "‚ö†Ô∏è Potentially useful but risky - Gathering intelligence is good, but end the call quickly and report it. Don't engage extensively.", type: "partial" },
              { text: "Provide limited access to see what they're after", points: 0, feedback: "‚ùå Extremely dangerous! Never give attackers any access. Even limited access can be leveraged for further exploitation.", type: "incorrect" }
            ]
          },
          {
            situation: "Company alert sent. An hour later, an employee in HR reports receiving an email appearing to be from you (IT Manager) requesting all employee personal information for a 'security audit.' The email looks legitimate with your signature. What's this attack vector and response?",
            choices: [
              { text: "This is email spoofing/phishing. Verify it's fake, warn staff, and implement email authentication (SPF/DKIM/DMARC)", points: 30, feedback: "‚úÖ Perfect! Attackers often chain attacks. Email authentication prevents domain spoofing. Add external email warnings to help users identify spoofing.", type: "correct" },
              { text: "Reply-all telling everyone the email is fake", points: 15, feedback: "‚ö†Ô∏è Partially correct - Warning is good, but reply-all to phishing emails can alert attackers. Use separate verified communication channel instead.", type: "partial" },
              { text: "Just tell the HR employee to ignore it", points: 5, feedback: "‚ùå Insufficient - Other employees may have received it too. Company-wide warning and technical controls are needed.", type: "incorrect" },
              { text: "Change your email password", points: 10, feedback: "‚ö†Ô∏è Misunderstands attack - This is spoofing, not account compromise. Changing password won't help. Implement email authentication instead.", type: "partial" }
            ]
          },
          {
            situation: "Investigation reveals the attackers gathered information from your company's LinkedIn profiles and website to make attacks convincing. This is called OSINT (Open Source Intelligence) reconnaissance. How do you balance transparency with security?",
            choices: [
              { text: "Train employees on safe social media practices, limit detailed organizational information publicly, implement verification procedures", points: 25, feedback: "‚úÖ Great! You can't eliminate online presence, but training employees and verification procedures defend against reconnaissance-based attacks.", type: "correct" },
              { text: "Delete all company social media and website information", points: 5, feedback: "‚ùå Unrealistic - Modern businesses need online presence. Focus on security awareness and verification procedures instead.", type: "incorrect" },
              { text: "Fire employees who share work information online", points: 0, feedback: "‚ùå Excessive - Employees need to network professionally. Educate them on safe practices rather than punish normal behavior.", type: "incorrect" },
              { text: "Post fake information to confuse attackers", points: 5, feedback: "‚ùå Counterproductive - This confuses legitimate contacts and damages credibility. Honest information with proper security procedures is better.", type: "incorrect" }
            ]
          },
          {
            situation: "Final scenario: Two months later, an 'IT vendor' arrives at reception with what appears to be a legitimate service appointment to 'upgrade network equipment.' They have forged emails and work orders. The receptionist almost grants them access. What preventive measures should be standard?",
            choices: [
              { text: "Maintain vendor registry, require pre-approved appointments, verify all service visits independently, issue visitor badges with escort requirements", points: 30, feedback: "‚úÖ Perfect! Physical security is critical. Verification procedures, visitor management, and escort requirements prevent unauthorized physical access.", type: "correct" },
              { text: "Just train reception to be suspicious of everyone", points: 10, feedback: "‚ö†Ô∏è Insufficient - Training helps but concrete procedures (verification calls, appointment systems) provide reliable protection.", type: "partial" },
              { text: "Install cameras to monitor vendor activity", points: 15, feedback: "‚ö†Ô∏è Reactive - Cameras detect problems after access is granted. Prevention (verification before access) is better than detection after.", type: "partial" },
              { text: "Allow vendors in but monitor them closely", points: 5, feedback: "‚ùå Too late - Once attackers have physical access, monitoring may not prevent damage. Verify legitimacy before granting access.", type: "incorrect" }
            ]
          }
        ]
      }
    };

    // Functions
    function startScenario(scenarioKey) {
      currentScenario = scenarios[scenarioKey];
      currentStep = 0;
      score = 0;
      decisions = 0;
      correctDecisions = 0;
      maxScore = 0;

      // Calculate max possible score
      currentScenario.steps.forEach(step => {
        const maxPoints = Math.max(...step.choices.map(c => c.points));
        maxScore += maxPoints;
      });

      document.getElementById('welcomeScreen').classList.add('hidden');
      document.getElementById('gameScreen').classList.remove('hidden');
      document.getElementById('scenarioTitle').textContent = currentScenario.title;

      showStep();
    }

    function showStep() {
      if (currentStep >= currentScenario.steps.length) {
        showResults();
        return;
      }

      const step = currentScenario.steps[currentStep];

      document.getElementById('situationText').textContent = step.situation;
      document.getElementById('currentStep').textContent = currentStep + 1;
      document.getElementById('totalSteps').textContent = currentScenario.steps.length;
      document.getElementById('currentScore').textContent = score;
      document.getElementById('decisionsCount').textContent = decisions;

      // Clear previous choices and feedback
      const choicesContainer = document.getElementById('choicesContainer');
      const feedbackContainer = document.getElementById('feedbackContainer');
      choicesContainer.innerHTML = '';
      feedbackContainer.innerHTML = '';

      // Create choice buttons
      step.choices.forEach((choice, index) => {
        const button = document.createElement('button');
        button.className = 'choice-btn';
        button.innerHTML = `
          <span class="number">${index + 1}</span>
          <span>${choice.text}</span>
        `;
        button.onclick = () => selectChoice(index);
        choicesContainer.appendChild(button);
      });
    }

    function selectChoice(choiceIndex) {
      const step = currentScenario.steps[currentStep];
      const choice = step.choices[choiceIndex];

      score += choice.points;
      decisions++;

      if (choice.type === 'correct') {
        correctDecisions++;
      }

      // Show feedback
      const feedbackContainer = document.getElementById('feedbackContainer');
      feedbackContainer.innerHTML = `
        <div class="feedback ${choice.type}">
          <h4>${choice.feedback.split('-')[0]}</h4>
          <p>${choice.feedback.split('-').slice(1).join('-').trim()}</p>
          <button class="next-btn" onclick="nextStep()">
            ${currentStep < currentScenario.steps.length - 1 ? 'Next Situation ‚û°Ô∏è' : 'See Results üéä'}
          </button>
        </div>
      `;

      // Disable choice buttons
      document.querySelectorAll('.choice-btn').forEach(btn => {
        btn.style.pointerEvents = 'none';
        btn.style.opacity = '0.6';
      });

      // Update score display
      document.getElementById('currentScore').textContent = score;
      document.getElementById('decisionsCount').textContent = decisions;
    }

    function nextStep() {
      currentStep++;
      showStep();
    }

    function showResults() {
      document.getElementById('gameScreen').classList.add('hidden');
      document.getElementById('resultsScreen').classList.remove('hidden');

      const percentage = Math.round((score / maxScore) * 100);
      let rating = '';
      let ratingText = '';

      if (percentage >= 90) {
        rating = 'üèÜüèÜüèÜ';
        ratingText = 'Expert Security Professional!';
      } else if (percentage >= 75) {
        rating = 'üèÜüèÜ';
        ratingText = 'Strong Security Knowledge!';
      } else if (percentage >= 60) {
        rating = 'üèÜ';
        ratingText = 'Good Security Awareness!';
      } else if (percentage >= 40) {
        rating = 'üìö';
        ratingText = 'Needs Improvement';
      } else {
        rating = '‚ö†Ô∏è';
        ratingText = 'High Risk - More Training Needed';
      }

      document.getElementById('finalScore').textContent = `${score}/${maxScore}`;
      document.getElementById('rating').textContent = rating;
      document.getElementById('ratingText').textContent = ratingText;
      document.getElementById('statScore').textContent = `${score}/${maxScore}`;
      document.getElementById('statDecisions').textContent = decisions;
      document.getElementById('statSuccess').textContent = `${percentage}%`;
    }

    function resetGame() {
      document.getElementById('resultsScreen').classList.add('hidden');
      document.getElementById('welcomeScreen').classList.remove('hidden');
      currentScenario = null;
      currentStep = 0;
      score = 0;
      maxScore = 0;
      decisions = 0;
      correctDecisions = 0;
    }
  </script>
</body>
</html>
